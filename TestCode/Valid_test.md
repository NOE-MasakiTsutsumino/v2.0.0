# 騒音計感度低下監視プログラム

### プログラム実行時の入力
*   対象測定局ID
*   実音ファイル取得開始日
*   実音ファイル数(平均化数、自由度)
*   対象オクターブバンド周波数

### 処理手順
    実音ファイル取得開始日から日付時刻を遡り実音ファイルを読み込んでいく
    データが指定数(平均化数)になるまで以下のデータ除外を行いつつ日付時刻をさかのぼって実音ファイルを読み込んでいく
    異常検知および外れデータの除外処理はオクターブごとに行う事とする

### 外れデータの除外処理
    騒音計の対象周波数オクターブバンドレベルがノイズレベル + 10dB未満の実音ファイルは弾く
    (騒音計のノイズレベルはあらかじめ計っておく必要がある)
    騒音計とサブマイクの差が「下位5%以下 上位95%以上」の実音ファイルは除外(平均値に影響を及ぼす外れ値)

### 分析方法
#### 実音ファイル毎の処理
    対象周波数のオクターブバンドレベル算出(騒音計信号とSubMicそれぞれ)
    騒音計信号とSubMicのオクターブバンドレベル差を求める
    オクターブバンドレベル差の平均値を求める

対象データの実音ファイルリストとオクターブバンド分析結果、マイク間差平均値をファイルに保存<br>

#### 異常検知の方法
    対応のある2標本t検定

    ※対応のある群、対応のない群どちらでしょう？
    標本を取り出す日付時間が異なるだけでグループは同一なのでおそらく対応のある群

    比較対象は、正常時の平均値と指定日から遡って取り出したデータの平均値

    ※正常時とは、騒音計校正直後のデータから求めた平均値。ただし上記の外れ値除外処理があるため、
    点検後ある程度の騒音イベントが起こらないと異常検知は実施できない模様

    感度低下の閾値を設定し、それを平均値の母平均μとして有意水準5%において、帰無仮説は棄却か否か求める。

*   仮説を立てる<br>
        帰無仮説は「比較対象標本の平均はほぼ等しい＝マイク感度は低下していなかった」とします。したがって、対立仮説は「比較対象標本の平均に差があった＝マイク感度は低下した」となります。

*   有意水準を設定する<br>
        ＝0.05とします。

*   適切な検定統計量を決める<br>
        この実験では母分散が分からないので、不偏分散を用いるt統計量を使う。

*   棄却ルールを決める<br>
        この検定で使用する分布は自由度が引数「実音ファイル数」の「t分布」です。この例題では騒音計感度が下がったかどうかのみを考えればよいので、片側検定を行います。統計数値表から統計検定量を決める。

*   検定統計量を元に結論を出す<br>
        校正前後での感度の差が例えば0.5かどうかを検定するため、μ = 0.5となります。また、マイク校正前後の平均差の不偏分散を求める。統計量tの式に代入し、有意水準0.05において帰無仮説が棄却か否か決める。